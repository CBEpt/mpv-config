##⇘⇘基本说明：
##这是附属设置文件，是配置组的集合，通用区已有的参数会被激活的配置组覆盖
##需要主设置文件 "mpv.conf" 中的 --include 参数指定后本文件才生效
##[xxx] 用于定义一组配置的头部标签，注释某组参数不能只注释头部
##详细了解配置组与通用参数的混合用法请读手册 [02]

 ##############
 # 内置配置组 #
 ##############
##⇘⇘mpv内置的配置组信息可由命令行界面的 --profile=help 和 --show-profile=<xxx> 获取
##这些祖传的配置组大多不会被使用，官方手册也缺乏系统的用途描述，自行查阅零散的说明
##之所以全部被注释掉是因为不可覆写原内容，修改的参数只会被追加到同名的配置组中（实际表现和覆写类似，原理参见手册 [02]）

##和 "gpu-hq" 完全一样
[opengl-hq]
#scale               = spline36
#cscale              = spline36
#dscale              = mitchell
#dither-depth        = auto
#correct-downscaling = yes
#linear-downscaling  = yes
#sigmoid-upscaling   = yes
#deband              = yes


[sw-fast]
#sws-scaler  = bilinear
#sws-fast    = yes
#zimg-scaler = bilinear
#zimg-dither = no


[low-latency]
#audio-buffer                 = 0
#vd-lavc-threads              = 1
#cache-pause                  = no
#demuxer-lavf-o-add           = fflags=+nobuffer
#demuxer-lavf-probe-info      = nostreams
#demuxer-lavf-analyzeduration = 0.1
#video-sync                   = audio
#interpolation                = no
#video-latency-hacks          = yes
#stream-buffer-size           = 4k


##最常用的内置配置组
[gpu-hq]
#scale               = spline36
#cscale              = spline36
#dscale              = mitchell
#dither-depth        = auto
#correct-downscaling = yes
#linear-downscaling  = yes
#sigmoid-upscaling   = yes
#deband              = yes


[encoding]
#vo              = lavc
#ao              = lavc
#keep-open       = no
#force-window    = no
#gapless-audio   = yes
#resume-playback = no
#load-scripts    = no
#osc             = no
#framedrop       = no


[libmpv]
#config                 = no
#idle                   = yes
#terminal               = no
#input-terminal         = no
#osc                    = no
#input-default-bindings = no
#input-vo-keyboard      = no
#input-media-keys       = no


[builtin-pseudo-gui]
#terminal             = no
#force-window         = yes
#idle                 = once
#screenshot-directory = ~~desktop/


##等效直接运行程序 "mpv.exe"
[pseudo-gui]
#player-operation-mode = pseudo-gui


##没有遗漏，默认组确实是空的
[default]



##############
# 常规配置组 #
##############
##⇘⇘常规配置没有自动触发条件（内置配置组也全为常规配置）
##需要主设置文件中使用 --profile=<profile1,profile2,...> 或多行 --profile=<xxx> 参数激活数个配置

[ICC]
 icc-profile-auto                     
 icc-intent=1
 icc-force-contrast=no
 icc-3dlut-size=64x64x64
 icc-cache-dir="~~/icc_cache" 
 vf-toggle=format:gamma=gamma2.2

[Target]
 target-prim=auto
 target-trc=auto
 target-peak=auto
 gamut-clipping=no

[Tscale]
 hr-seek-framedrop=yes                           
 video-sync=display-resample
 video-sync-max-video-change=5   
 interpolation
 tscale=oversample

[Tscale-box]
## 这组时间插值方案参数来自开源社区，顺滑但不一定适合所有源 https://github.com/mpv-player/mpv/issues/2685
 hr-seek-framedrop=yes                              
 video-sync=display-resample  
 video-sync-max-video-change=5     
 interpolation
 tscale=box
 tscale-window=quadric                        # 或者 sphinx
 tscale-radius=1.0                            # 较高值更顺滑但也更糊，例 1.01，其他可测试值:1.025,1.1
 tscale-clamp=0.0

[Dither]
 dither-depth=auto
 dither=ordered
 temporal-dither
 temporal-dither-period=1 

[Dither+]
 dither-depth=auto
 dither=error-diffusion
 dither-size-fruit=6
 error-diffusion=sierra-lite
 temporal-dither
 temporal-dither-period=1 

[HQ]
 scale=ewa_hanning
 cscale=ewa_hanning
 dscale=mitchell
 linear-upscaling=no
 sigmoid-upscaling=no
 correct-downscaling=no
 linear-downscaling=no
 scaler-resizes-only=no
 deband=no

[NNEDI3]
 profile-desc=适用于大多数场景
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/nnedi3/nnedi3-nns16-win8x4.glsl;~~/shaders/ravu/ravu-lite-r4.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[NNEDI3+]
 profile-desc=适用于大多数场景
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/nnedi3/nnedi3-nns32-win8x4.glsl;~~/shaders/ravu/ravu-lite-r4.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[Normal]
 profile-desc=适用于大多数场景
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/igv/FSRCNNX_x2_8-0-4-1.glsl;~~/shaders/ravu/ravu-lite-r4.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[Normal+]
 profile-desc=适用于低解析场景
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/igv/FSRCNNX_x2_16-0-4-1_enhance.glsl;~~/shaders/ravu/ravu-lite-r4.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[Anime]
 profile-desc=适用于大多数动画
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/igv/FSRCNNX_x2_8-0-4-1_LineArt.glsl;~~/shaders/ravu/ravu-r4.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[Anime+]
 profile-desc=适用于低解析动画
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/igv/FSRCNNX_x2_16-0-4-1_anime_enhance.glsl;~~/shaders/ravu/ravu-r4.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[Anime-ravu-3x]
 profile-desc=适用于低解析动画
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/ravu/ravu-3x-r4.glsl;~~/shaders/ravu/ravu-r4.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[ACNet]
 profile-desc=ACNet
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/ACNet/ACNet.glsl;~~/shaders/ACNet/ACNet.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[ACNet+]
 profile-desc=ACNet降噪
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/ACNet/ACNet_HDN_L1.glsl;~~/shaders/ACNet/ACNet.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[Anime4K]
 profile-desc=Anime4K
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/Anime4K/Anime4K_Clamp_Highlights.glsl;~~/shaders/Anime4K/Anime4K_Restore_CNN_Soft_M.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[Anime4K+]
 profile-desc=Anime4K+
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/Anime4K/Anime4K_Clamp_Highlights.glsl;~~/shaders/Anime4K/Anime4K_Restore_CNN_M.glsl;~~/shaders/Anime4K/Anime4K_Upscale_CNN_x2_S.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[4K-SSSR]
 profile-desc=适用于4k低性能
 dscale=mitchell
 linear-downscaling=no
 sigmoid-upscaling=no
 glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/igv/FSRCNNX_x2_8-0-4-1.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[DeBand-low]
 profile-desc=DeBand low
 deband
 deband-iterations=1
 deband-threshold=64
 deband-range=16
 deband-grain=48

[DeBand-medium]
 profile-desc=deband medium
 deband
 deband-iterations=2
 deband-threshold=64
 deband-range=16
 deband-grain=48

[DeBand-high]
 profile-desc=deband high
 deband
 deband-iterations=3
 deband-threshold=64
 deband-range=16
 deband-grain=48

##############
# 条件配置组 #
##############
##⇘⇘条件触发配置，根据给定条件激发特定参数。简易格式见示例
##仅注释掉 --profile-cond 和 --profile-restore 即可将条件配置变为常规配置，常规配置的使用方法为通用区 --profile=<value>

##⇘⇘条件配置的格式示例
##[FS-loop]                                                  # 配置名称，自定义
##profile-desc    = 全屏时循环播放当前文件                   # 配置的描述，不属于参数，随意写
##profile-cond    = fullscreen                               # 触发该配置的条件。可用的属性列表 https://mpv.io/manual/master/#property-list
##profile-restore = copy                                     # 此参数一般用于回归触发前的通用参数（关闭此项将保留）
##...                                                        # 然后写该条件下触发的参数
##...

[Deband-]
 profile-desc=YUV420P10及以上的源关闭去色带
 profile-cond=p["video-params/average-bpp"]>=24
 profile-restore=copy
 deband=no

[HDR2SDR]
 profile-desc=HDR映射
 profile-cond=p["video-params/primaries"]=="bt.2020"
 profile-restore=copy
 #icc-profile-auto                                           # 使用icc色彩管理时可避免hdr下mpv默认--gamut-clipping 参数导致的色度偏移
 target-peak=100                                             # <10-10000> （默认auto即203）该数值越低，画面整体越亮，根据屏幕实际nits值和显示效果调整
 tone-mapping=mobius                                         # 色调映射算法，其他推荐能用的有clip/reinhard/hable/gamma，默认 bt.2390
 tone-mapping-param=0.3                                      # 色调映射算法的小参，bt.2390和hable无参。mobius默认0.3/reinhard默认0.5/gamma默认1.8
 hdr-compute-peak=yes                                        # 此选项基本上提供了动态的基于场景的色调映射（较老的显卡不支持此参数，此时画面将变得惨白）
 hdr-peak-decay-rate=100                                     # [当 --hdr-compute-peak=yes 时生效] ，用于 HDR 峰值检测算法的衰变率（<1.0.1000.0>默认值：100.0）
 hdr-scene-threshold-low=5.5                                 # [当 --hdr-compute-peak=yes 时生效] ，亮度差异的下阈值（dB）将被视为场景更改（<0.0.100.0>默认值：5.5）
 hdr-scene-threshold-high=10                                 # [当 --hdr-compute-peak=yes 时生效] ，亮度差异的上阈值（dB）将被视为场景更改（<0.0.100.0>默认值：10.0）
 #gamut-warning                                              # 配合--tone-mapping=clip 和 --target-prim 参数使用，启用时mpv将标记所有超出给定阈值的剪裁/出域像素（当前硬编码为 101%）。受影响的像素将被处理并更加突显（icc色彩管理下该参数无效）
 gamut-clipping=no                                           # 通过降低色域外颜色的饱和度，进行色度裁剪。此处关闭以避免色度偏移（icc色彩管理下该参数无效） https://github.com/mpv-player/mpv/issues/9071
 tone-mapping-max-boost=1.0                                  # <1.0-10.0> 平均亮度的最大曝光倍数，默认：1.0。增大此值可显示暗处隐藏的细节，过高会使暗处看起来不自然地明亮
 tone-mapping-desaturate=0.9                                 # <0.0-1.0> （默认0.75）高光去饱和度
 tone-mapping-desaturate-exponent=0                          # <0.0-20.0> （默认1.5）去饱和指数
 blend-subtitles=no                                          # 问题状态 https://github.com/mpv-player/mpv/issues/6368 （静态映射不受影响）
 sub-ass-force-margins=no                                   
 vf=""                                                       # 此项用于清空vf列表恢复合理的HDR播放效果（如果启用 --vf=format:gamma=gamma2.2 的话会影响hdr的显示）

#[VCB-Studio]
## 字符串匹配的示例写法。根据文件名中的特定字符触发的配置
## 不熟悉Lua语法的话尽量写纯数字英文或者使用叠加法达成近似效果，例：string.match(p.filename, "(VCB)")~=nil and string.match(p.filename, "(Studio)")~=nil
#profile-desc=真空断路器
#profile-cond=string.match(p.filename, "(VCB%-Studio)")~=nil
#profile-restore=copy
#deband=no

#[DVD-Anime]
#profile-desc=2D低清源增强
#profile-cond=height<=576
#profile-restore=copy
#glsl-shaders="~~/shaders/igv/KrigBilateral.glsl;~~/shaders/igv/FSRCNNX_x2_8-0-4-1_LineArt.glsl;~~/shaders/igv/FSRCNNX_x2_8-0-4-1_LineArt.glsl;~~/shaders/igv/SSimSuperRes.glsl;~~/shaders/igv/SSimDownscaler.glsl"

[rot-fix]
 profile-desc=修复旋转输出的色度破坏                         # 问题状态 https://github.com/mpv-player/mpv/issues/8223
 profile-cond=p["video-params/rotate"]==90 or p["video-params/rotate"]==270
 profile-restore=copy
 hwdec=no

##############
# 传统配置组 #
##############
##⇘⇘ Legacy auto profiles 根据扩展名自动切换到符合的配置。语法见示例

##⇘⇘传统自动配置的格式示例
##[extension.扩展名]
##不要写 --profile-cond 和 --profile-restore
##... # 直接写参数即可


#[extension.vpy]
#profile-desc        = 支持 "xxxx.vpy" 文件的预览
#demuxer-lavf-format = vapoursynth